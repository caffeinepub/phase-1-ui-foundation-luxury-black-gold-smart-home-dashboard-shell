{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Rooms stepper: immediate tile rendering, default Room N naming, and reliable React Query refresh",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Render a new RoomTile immediately in the Rooms grid when the room count is incremented, without refresh.",
      "acceptanceCriteria": [
        "On Rooms page, clicking the + button increases the count and a corresponding additional RoomTile renders immediately in the grid.",
        "The new tile appears without manual reload/navigation and without waiting for a long delay.",
        "No regression: decreasing the count hides extra tiles accordingly."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/RoomsPage.tsx",
          "operation": "modify",
          "description": "Update the display-count change flow to immediately reflect the new room count in the rendered grid (including optimistic/derived placeholder tiles when needed), and ensure decrementing the count removes extra tiles from the grid without requiring a refresh."
        },
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Add/adjust React Query utilities used by RoomsPage to support immediate UI updates when the room count changes (e.g., query cache updates and invalidation/refetch orchestration for the rooms-for-count query)."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Auto-generate default English names for newly shown rooms as \"Room N\" and keep existing rename flow working.",
      "acceptanceCriteria": [
        "When a new room becomes visible due to increasing the count, its displayed name is auto-generated as \"Room N\" (e.g., \"Room 6\").",
        "The existing inline edit flow on RoomTile can rename the room and the updated name persists after refresh (stored via backend)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/rooms/RoomTile.tsx",
          "operation": "modify",
          "description": "Ensure the tile display name falls back to an auto-generated default in English using the format \"Room N\" when a newly visible room has no persisted name yet, while preserving the existing inline edit UI and save behavior."
        },
        {
          "path": "frontend/src/pages/RoomsPage.tsx",
          "operation": "modify",
          "description": "When increasing the room count, ensure any newly rendered room entries use an auto-generated default name \"Room N\" (based on the room id/number) until the user edits the name via the existing RoomTile editing flow."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Keep rooms list data in sync with the count by reliably refreshing React Query data on increment/decrement.",
      "acceptanceCriteria": [
        "Changing the room count triggers a consistent update of the rooms list (no stale list that ignores the new count).",
        "If a fetch is needed, the UI transitions cleanly (no permanent loading state; errors still show the existing retry UI)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Refine the rooms-for-count query behavior so count changes consistently trigger the correct fetch and/or cache update (avoiding stale results), while preserving existing loading/error states and retry behavior."
        },
        {
          "path": "frontend/src/pages/RoomsPage.tsx",
          "operation": "modify",
          "description": "Wire the displayCount change handling to the React Query refresh strategy (invalidate/refetch and/or cache updates) so increment/decrement keeps UI and fetched room data aligned, without introducing long delays or permanent loading states."
        }
      ]
    }
  ]
}