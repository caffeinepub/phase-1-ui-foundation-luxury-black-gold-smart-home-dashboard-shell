{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "New project",
  "architectural_notes": [
    "On first successful authentication (e.g., Internet Identity), backend should auto-provision the caller as a 'user' if not already registered, so Rooms API calls don't fail with 'Unauthorized: Must have user role'."
  ],
  "known_issues": [
    "Rooms page can fail to load with 'Unauthorized: Must have user role' for newly authenticated users who are not yet registered as 'user' in backend."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-update-the-frontend-to-call-the-new-provisioning-method-once-after-successful-authentication-internet-identity-and-before-triggering-rooms-related-react-query-fetches-so-that-the-rooms-page-can-load-successfully-for-first-time-users-without-manual-retries",
      "title": "Update the frontend to call the new provisioning method once after successful authentication (Internet Identity) and before triggering Rooms-related React Query fetches, so that the Rooms page can load successfully for first-time users without manual retries.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Auto-register/provision a new authenticated user as role 'user' on first login to prevent Rooms page Unauthorized error",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Add a backend flow that automatically provisions an authenticated caller with the '#user' role on first login/first use, so that newly signed-in users do not hit \"Unauthorized: Must have user role\" when loading Rooms.",
      "reqIds": [
        "REQ-6"
      ],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Expose a backend shared method that the frontend can call immediately after Internet Identity login to trigger user auto-provisioning (because Rooms list endpoints are query calls and cannot mutate state).",
      "reqIds": [
        "REQ-7"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Auto-provision authenticated principals as 'user' role to prevent Rooms Unauthorized error",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}